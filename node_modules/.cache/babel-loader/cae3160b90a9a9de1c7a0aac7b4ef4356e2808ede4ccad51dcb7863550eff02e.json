{"ast":null,"code":"import { addDays, format, startOfMonth, endOfMonth, isBefore, isAfter, isWithinInterval, parseISO } from 'date-fns';\n\n/**\n * Get pay periods for a given month\n * Returns both periods with their date ranges\n */\nexport const getPayPeriodsForMonth = (year, month) => {\n  const monthStart = new Date(year, month - 1, 1);\n  const monthEnd = endOfMonth(monthStart);\n  return [{\n    period: 1,\n    startDate: new Date(year, month - 1, 1),\n    endDate: new Date(year, month - 1, 15),\n    label: `${format(monthStart, 'MMMM')} 1-15`\n  }, {\n    period: 2,\n    startDate: new Date(year, month - 1, 16),\n    endDate: monthEnd,\n    label: `${format(monthStart, 'MMMM')} 16-${format(monthEnd, 'd')}`\n  }];\n};\n\n/**\n * Calculate all paychecks for a person within a date range\n */\nexport const calculatePaychecks = (startDate, endDate, nextPayDate, payDayOfWeek, amount) => {\n  const paychecks = [];\n  let currentPayDate = parseISO(nextPayDate);\n\n  // Day mapping\n  const dayMap = {\n    'Sunday': 0,\n    'Monday': 1,\n    'Tuesday': 2,\n    'Wednesday': 3,\n    'Thursday': 4,\n    'Friday': 5,\n    'Saturday': 6\n  };\n  const targetDay = dayMap[payDayOfWeek];\n\n  // Ensure we start from or before the range start\n  while (isAfter(currentPayDate, endDate)) {\n    currentPayDate = addDays(currentPayDate, -14);\n  }\n  while (isBefore(currentPayDate, startDate)) {\n    currentPayDate = addDays(currentPayDate, 14);\n  }\n\n  // Collect all paychecks in range\n  while (isBefore(currentPayDate, endDate) || currentPayDate.getTime() === endDate.getTime()) {\n    if (isWithinInterval(currentPayDate, {\n      start: startDate,\n      end: endDate\n    })) {\n      paychecks.push({\n        date: format(currentPayDate, 'yyyy-MM-dd'),\n        amount: parseFloat(amount),\n        displayDate: format(currentPayDate, 'MMM d')\n      });\n    }\n    currentPayDate = addDays(currentPayDate, 14);\n  }\n  return paychecks;\n};\n\n/**\n * Calculate total income for a pay period\n */\nexport const calculatePeriodIncome = (period, incomeSources) => {\n  let jorgeTotal = 0;\n  let jorgePaychecks = [];\n  let anseliTotal = 0;\n  let anseliPaychecks = [];\n  incomeSources.forEach(source => {\n    const paychecks = calculatePaychecks(period.startDate, period.endDate, source.next_pay_date, source.pay_day_of_week, source.amount);\n    const total = paychecks.reduce((sum, check) => sum + check.amount, 0);\n    if (source.person === 'Jorge') {\n      jorgeTotal = total;\n      jorgePaychecks = paychecks;\n    } else {\n      anseliTotal = total;\n      anseliPaychecks = paychecks;\n    }\n  });\n  return {\n    jorgeTotal,\n    jorgePaychecks,\n    anseliTotal,\n    anseliPaychecks,\n    totalIncome: jorgeTotal + anseliTotal\n  };\n};\n\n/**\n * Assign bills to period based on due date\n */\nexport const assignBillsToPeriod = (bills, period) => {\n  return bills.filter(bill => {\n    if (period.period === 1) {\n      return bill.due_date <= 15;\n    } else {\n      return bill.due_date > 15;\n    }\n  });\n};\n\n/**\n * Calculate transfer amount needed\n */\nexport const calculateTransfer = (periodIncome, billsAssigned) => {\n  const jorgeBills = billsAssigned.filter(b => b.paid_by === 'Jorge').reduce((sum, b) => sum + parseFloat(b.amount || 0), 0);\n  const anseliBills = billsAssigned.filter(b => b.paid_by === 'Anseli').reduce((sum, b) => sum + parseFloat(b.amount || 0), 0);\n  const jorgeBalance = periodIncome.jorgeTotal - jorgeBills;\n  const anseliBalance = periodIncome.anseliTotal - anseliBills;\n  let transferAmount = 0;\n  let transferDirection = '';\n  if (anseliBalance < 0) {\n    transferAmount = Math.abs(anseliBalance);\n    transferDirection = 'Jorge → Anseli';\n  } else if (jorgeBalance < 0) {\n    transferAmount = Math.abs(jorgeBalance);\n    transferDirection = 'Anseli → Jorge';\n  }\n  return {\n    jorgeBills,\n    anseliBills,\n    jorgeBalance,\n    anseliBalance,\n    transferAmount,\n    transferDirection,\n    totalBills: jorgeBills + anseliBills,\n    leftover: periodIncome.totalIncome - (jorgeBills + anseliBills)\n  };\n};\n\n/**\n * Get current pay period\n */\nexport const getCurrentPayPeriod = () => {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = today.getMonth() + 1;\n  const day = today.getDate();\n  const periods = getPayPeriodsForMonth(year, month);\n  return day <= 15 ? periods[0] : periods[1];\n};\n\n/**\n * Format currency\n */\nexport const formatCurrency = amount => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(amount || 0);\n};","map":{"version":3,"names":["addDays","format","startOfMonth","endOfMonth","isBefore","isAfter","isWithinInterval","parseISO","getPayPeriodsForMonth","year","month","monthStart","Date","monthEnd","period","startDate","endDate","label","calculatePaychecks","nextPayDate","payDayOfWeek","amount","paychecks","currentPayDate","dayMap","targetDay","getTime","start","end","push","date","parseFloat","displayDate","calculatePeriodIncome","incomeSources","jorgeTotal","jorgePaychecks","anseliTotal","anseliPaychecks","forEach","source","next_pay_date","pay_day_of_week","total","reduce","sum","check","person","totalIncome","assignBillsToPeriod","bills","filter","bill","due_date","calculateTransfer","periodIncome","billsAssigned","jorgeBills","b","paid_by","anseliBills","jorgeBalance","anseliBalance","transferAmount","transferDirection","Math","abs","totalBills","leftover","getCurrentPayPeriod","today","getFullYear","getMonth","day","getDate","periods","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits"],"sources":["C:/Users/gmedi/Desktop/Finance App/budget-app-complete/budget-app/src/utils/calculations.js"],"sourcesContent":["import { addDays, format, startOfMonth, endOfMonth, isBefore, isAfter, isWithinInterval, parseISO } from 'date-fns';\n\n/**\n * Get pay periods for a given month\n * Returns both periods with their date ranges\n */\nexport const getPayPeriodsForMonth = (year, month) => {\n  const monthStart = new Date(year, month - 1, 1);\n  const monthEnd = endOfMonth(monthStart);\n  \n  return [\n    {\n      period: 1,\n      startDate: new Date(year, month - 1, 1),\n      endDate: new Date(year, month - 1, 15),\n      label: `${format(monthStart, 'MMMM')} 1-15`\n    },\n    {\n      period: 2,\n      startDate: new Date(year, month - 1, 16),\n      endDate: monthEnd,\n      label: `${format(monthStart, 'MMMM')} 16-${format(monthEnd, 'd')}`\n    }\n  ];\n};\n\n/**\n * Calculate all paychecks for a person within a date range\n */\nexport const calculatePaychecks = (startDate, endDate, nextPayDate, payDayOfWeek, amount) => {\n  const paychecks = [];\n  let currentPayDate = parseISO(nextPayDate);\n  \n  // Day mapping\n  const dayMap = {\n    'Sunday': 0, 'Monday': 1, 'Tuesday': 2, 'Wednesday': 3,\n    'Thursday': 4, 'Friday': 5, 'Saturday': 6\n  };\n  \n  const targetDay = dayMap[payDayOfWeek];\n  \n  // Ensure we start from or before the range start\n  while (isAfter(currentPayDate, endDate)) {\n    currentPayDate = addDays(currentPayDate, -14);\n  }\n  \n  while (isBefore(currentPayDate, startDate)) {\n    currentPayDate = addDays(currentPayDate, 14);\n  }\n  \n  // Collect all paychecks in range\n  while (isBefore(currentPayDate, endDate) || currentPayDate.getTime() === endDate.getTime()) {\n    if (isWithinInterval(currentPayDate, { start: startDate, end: endDate })) {\n      paychecks.push({\n        date: format(currentPayDate, 'yyyy-MM-dd'),\n        amount: parseFloat(amount),\n        displayDate: format(currentPayDate, 'MMM d')\n      });\n    }\n    currentPayDate = addDays(currentPayDate, 14);\n  }\n  \n  return paychecks;\n};\n\n/**\n * Calculate total income for a pay period\n */\nexport const calculatePeriodIncome = (period, incomeSources) => {\n  let jorgeTotal = 0;\n  let jorgePaychecks = [];\n  let anseliTotal = 0;\n  let anseliPaychecks = [];\n  \n  incomeSources.forEach(source => {\n    const paychecks = calculatePaychecks(\n      period.startDate,\n      period.endDate,\n      source.next_pay_date,\n      source.pay_day_of_week,\n      source.amount\n    );\n    \n    const total = paychecks.reduce((sum, check) => sum + check.amount, 0);\n    \n    if (source.person === 'Jorge') {\n      jorgeTotal = total;\n      jorgePaychecks = paychecks;\n    } else {\n      anseliTotal = total;\n      anseliPaychecks = paychecks;\n    }\n  });\n  \n  return {\n    jorgeTotal,\n    jorgePaychecks,\n    anseliTotal,\n    anseliPaychecks,\n    totalIncome: jorgeTotal + anseliTotal\n  };\n};\n\n/**\n * Assign bills to period based on due date\n */\nexport const assignBillsToPeriod = (bills, period) => {\n  return bills.filter(bill => {\n    if (period.period === 1) {\n      return bill.due_date <= 15;\n    } else {\n      return bill.due_date > 15;\n    }\n  });\n};\n\n/**\n * Calculate transfer amount needed\n */\nexport const calculateTransfer = (periodIncome, billsAssigned) => {\n  const jorgeBills = billsAssigned\n    .filter(b => b.paid_by === 'Jorge')\n    .reduce((sum, b) => sum + parseFloat(b.amount || 0), 0);\n    \n  const anseliBills = billsAssigned\n    .filter(b => b.paid_by === 'Anseli')\n    .reduce((sum, b) => sum + parseFloat(b.amount || 0), 0);\n  \n  const jorgeBalance = periodIncome.jorgeTotal - jorgeBills;\n  const anseliBalance = periodIncome.anseliTotal - anseliBills;\n  \n  let transferAmount = 0;\n  let transferDirection = '';\n  \n  if (anseliBalance < 0) {\n    transferAmount = Math.abs(anseliBalance);\n    transferDirection = 'Jorge → Anseli';\n  } else if (jorgeBalance < 0) {\n    transferAmount = Math.abs(jorgeBalance);\n    transferDirection = 'Anseli → Jorge';\n  }\n  \n  return {\n    jorgeBills,\n    anseliBills,\n    jorgeBalance,\n    anseliBalance,\n    transferAmount,\n    transferDirection,\n    totalBills: jorgeBills + anseliBills,\n    leftover: periodIncome.totalIncome - (jorgeBills + anseliBills)\n  };\n};\n\n/**\n * Get current pay period\n */\nexport const getCurrentPayPeriod = () => {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = today.getMonth() + 1;\n  const day = today.getDate();\n  \n  const periods = getPayPeriodsForMonth(year, month);\n  return day <= 15 ? periods[0] : periods[1];\n};\n\n/**\n * Format currency\n */\nexport const formatCurrency = (amount) => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(amount || 0);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}